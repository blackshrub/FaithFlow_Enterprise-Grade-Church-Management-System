################################################################################
# FaithFlow Environment Configuration
# 
# This file contains all environment variables for both backend and frontend.
# Copy this file and create separate .env files:
#   - backend/.env (for backend variables)
#   - frontend/.env (for frontend variables)
################################################################################

# ==============================================================================
# BACKEND CONFIGURATION
# ==============================================================================

# ------------------------------------------------------------------------------
# MongoDB Configuration
# ------------------------------------------------------------------------------
MONGO_URL="mongodb://localhost:27017"
DB_NAME="faithflow_production"

# For MongoDB Atlas (production):
# MONGO_URL="mongodb+srv://username:password@cluster.mongodb.net/?retryWrites=true&w=majority"

# ------------------------------------------------------------------------------
# CORS Configuration
# ------------------------------------------------------------------------------
CORS_ORIGINS="*"

# For production, specify allowed origins:
# CORS_ORIGINS="https://yourdomain.com,https://www.yourdomain.com"

# ------------------------------------------------------------------------------
# JWT Authentication
# ------------------------------------------------------------------------------
# Generate with: python3 -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY="your-secret-key-change-this-in-production"

# ⚠️  IMPORTANT: Generate a new secure key for production!

# ------------------------------------------------------------------------------
# WhatsApp API Configuration (Optional)
# ------------------------------------------------------------------------------
# Configure in admin panel (Settings → General) instead of here.
# These are fallback values if not configured in database.
WHATSAPP_API_URL=""
WHATSAPP_USERNAME=""
WHATSAPP_PASSWORD=""

# Example for go-whatsapp-web-multidevice:
# WHATSAPP_API_URL="http://localhost:3000"
# WHATSAPP_USERNAME="" (optional)
# WHATSAPP_PASSWORD="" (optional)

# ==============================================================================
# FRONTEND CONFIGURATION
# ==============================================================================

# ------------------------------------------------------------------------------
# Backend API URL
# ------------------------------------------------------------------------------
REACT_APP_BACKEND_URL="https://your-domain.com"

# For development:
# REACT_APP_BACKEND_URL="http://localhost:8001"

# For Emergent deployment:
# REACT_APP_BACKEND_URL="https://your-app.preview.emergentagent.com"

# ------------------------------------------------------------------------------
# WebSocket Configuration
# ------------------------------------------------------------------------------
WDS_SOCKET_PORT=443

# For local development:
# WDS_SOCKET_PORT=3000

# ------------------------------------------------------------------------------
# Feature Flags
# ------------------------------------------------------------------------------
REACT_APP_ENABLE_VISUAL_EDITS=false
ENABLE_HEALTH_CHECK=false

# ==============================================================================
# DEPLOYMENT NOTES
# ==============================================================================

# 1. Create backend/.env:
#    - Copy BACKEND section above
#    - Set MONGO_URL to your MongoDB instance
#    - Generate new JWT_SECRET_KEY
#    - Leave WhatsApp empty (configure in admin panel)
#
# 2. Create frontend/.env:
#    - Copy FRONTEND section above  
#    - Set REACT_APP_BACKEND_URL to your domain
#    - Keep WDS_SOCKET_PORT as 443 for production
#
# 3. For Emergent deployment:
#    - Commit this .env.example file
#    - Platform will inject actual values
#    - Secrets managed via Kubernetes
#
# 4. Security:
#    - Never commit actual .env files
#    - Always use strong JWT secret
#    - Change default admin password
#    - Change default staff PINs (000000)

# ==============================================================================
# MULTI-TENANT SETUP
# ==============================================================================

# FaithFlow supports multiple churches in one deployment.
# Each church is isolated by church_id.
# 
# To add multiple churches:
# 1. Login as super_admin
# 2. Go to Churches (direct URL)
# 3. Add new church
# 4. Create admin user for that church
# 5. Configure church-specific settings

# ==============================================================================
# KIOSK CONFIGURATION
# ==============================================================================

# Kiosk is configured in admin panel (Settings → Kiosk):
# - Enable/disable services
# - Set Pre-Visitor default status
# - Configure inactivity timeout
# - Set default language
# - Customize home title/subtitle
#
# Kiosk URL: https://your-domain.com/
# Admin URL: https://your-domain.com/admin

# ==============================================================================
# WHATSAPP OTP
# ==============================================================================

# WhatsApp is configured in admin panel (Settings → General):
# - WhatsApp API URL
# - Username (optional)
# - Password (optional)
#
# OTP will be sent via configured gateway.
# For testing, OTP codes are printed to console.

# ==============================================================================
# BACKUP & MAINTENANCE
# ==============================================================================

# Database Backup:
# mongodump --db faithflow_production --out /backup/$(date +%Y%m%d)
#
# Restore:
# mongorestore --db faithflow_production /backup/20250101
#
# Logs:
# tail -f /var/log/supervisor/backend.out.log
# tail -f /var/log/supervisor/frontend.out.log
#
# Restart:
# sudo supervisorctl restart all
