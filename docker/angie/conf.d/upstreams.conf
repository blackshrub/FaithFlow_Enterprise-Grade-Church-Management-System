# =============================================================================
# Upstream Definitions for FaithFlow Docker Services
# =============================================================================
# All services are accessed via localhost since containers expose ports to host
#
# Port mapping:
#   - Frontend:  127.0.0.1:3080 -> container:80
#   - Backend:   127.0.0.1:8000 -> container:8000
#   - LiveKit:   127.0.0.1:7880 -> container:7880
#   - EMQX:      127.0.0.1:18083 -> container:18083
#   - SeaweedFS: 127.0.0.1:8888 -> container:8888
# =============================================================================

# Frontend (React/Nginx)
upstream faithflow_frontend {
    server 127.0.0.1:3080;
    keepalive 32;
}

# Backend (FastAPI/Granian)
upstream faithflow_backend {
    server 127.0.0.1:8000;
    keepalive 32;
}

# LiveKit (WebRTC SFU)
upstream faithflow_livekit {
    server 127.0.0.1:7880;
    keepalive 16;
}

# EMQX Dashboard
upstream faithflow_emqx {
    server 127.0.0.1:18083;
    keepalive 8;
}

# SeaweedFS Filer
upstream faithflow_seaweedfs {
    server 127.0.0.1:8888;
    keepalive 16;
}
